Index: themes/wfp_mobile/templates/page/page.tpl.php
===================================================================
--- themes/wfp_mobile/templates/page/page.tpl.php	(revision 1014)
+++ themes/wfp_mobile/templates/page/page.tpl.php	(working copy)
@@ -208,11 +208,9 @@
   </div><!-- /#page -->
   <?php print $closure; ?>
   
-  <?php 
-  if (isset($gawfpfooter)){
-    print $gawfpfooter;
-  }
-  ?>
+<?php if ($google_analytics): ?>
+  <?php print $google_analytics; ?>
+<?php endif; ?>
   
 </body>
 </html>
Index: themes/wfp_org/template.php
===================================================================
--- themes/wfp_org/template.php	(revision 1014)
+++ themes/wfp_org/template.php	(working copy)
@@ -32,7 +32,6 @@
   $head = preg_replace('/<script(.|\s)+?src\=".+?maps.google.com.+?"(.|\s)+?><\/script>/', '', $head);
 
   $variables['head'] = $head;
-
 }
 
 /**
@@ -74,4 +73,16 @@
 
   $html  =  "<ul class='menu level-$i'>" . $tree . '</ul>';
   return $html;
+}
+
+/**
+ * Implementation of hook_preprocess_views_view().
+ */
+function wfp_org_preprocess_views_view(&$vars) {
+  //Theming views admin links
+  $links = $vars['admin_links_raw'];
+  $vars['admin_links'] = theme('links', $links, array('class' => 'tabs primary'));
+  if ($attachment_after = wfp_section_menu()) {
+    $vars['attachment_after'] = $attachment_after;
+  }
 }
\ No newline at end of file
Index: themes/wfp_org/css/style.css
===================================================================
--- themes/wfp_org/css/style.css	(revision 1017)
+++ themes/wfp_org/css/style.css	(working copy)
@@ -631,6 +631,16 @@
 }
 
 /* ==========================================================================
+    Operations View List page.
+   ========================================================================== */
+.operations {
+  padding: 15px 0 15px 0;
+  border-bottom: 1px solid #E5E5E5;
+}
+.operations .operations-icon {margin: 5px 0 0 0;}
+.operations .operations-type {font-size: small;}
+
+/* ==========================================================================
    Media Queries
    ========================================================================== */
 @media only screen and (min-width: 35em) {
Index: themes/wfp_org/img/icons/fight_against_hiv_aids.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/fight_against_hiv_aids.gif
___________________________________________________________________
Added: svn:executable
   + *
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/asia.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/asia.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/school_for_meals.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/school_for_meals.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/cash_and_vouchers.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/cash_and_vouchers.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/food_for_assets.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/food_for_assets.gif
___________________________________________________________________
Added: svn:executable
   + *
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/responding_to_emergencies.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/responding_to_emergencies.gif
___________________________________________________________________
Added: svn:executable
   + *
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/focus_on_women.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/focus_on_women.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/food_security_analysis.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/food_security_analysis.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/americas.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/americas.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/africa.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/africa.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/middle-east.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/middle-east.gif
___________________________________________________________________
Added: svn:executable
   + *
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/nutrition.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/nutrition.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/wfp.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/wfp.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/emergency_response.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/emergency_response.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/view_more.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/view_more.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/icon_africa.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/icon_africa.gif
___________________________________________________________________
Added: svn:executable
   + *
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/europe.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/europe.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/food_for_work.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/food_for_work.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/logistics.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/logistics.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/me.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/me.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/food_for_women.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/food_for_women.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/food_for_HIV.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/food_for_HIV.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/procurement.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/procurement.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/purchase_for_progress.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/purchase_for_progress.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/img/icons/rss.gif
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: themes/wfp_org/img/icons/rss.gif
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: themes/wfp_org/wfp_org.info
===================================================================
--- themes/wfp_org/wfp_org.info	(revision 1014)
+++ themes/wfp_org/wfp_org.info	(working copy)
@@ -8,3 +8,34 @@
 stylesheets[all][] = "css/style.css"
 scripts[] = "js/header.js"
 scripts[] = "js/global.js"
+
+regions[left] = Left Sidebar
+regions[right] = Right Sidebar (legacy)
+regions[sidebar_right] = Right Sidebar
+regions[sidebar_content_flow] = Section (content-flow driven) Pages Sidebar
+regions[sidebar_topic_page] = Topic Pages Sidebar
+regions[sidebar_site_page] = Site Pages Sidebar
+regions[sidebar_country_detail] = Country Detail Page Sidebar (Bottom Part)
+regions[sidebar_homepage] = Home Page Sidebar
+regions[sidebar_howtohelp] = How To Help Sidebar
+regions[sidebar_ourwork] = Our Work Sidebar
+regions[sidebar_operation_detail_page] = Operations Detail Page Sidebar
+regions[sidebar_web_story_page] = Web Story Page Sidebar
+regions[sidebar_press_release_page] = Press Release Page Sidebar
+regions[sidebar_operation_type] = Operation Type Page Sidebar
+regions[content] = Content
+regions[homepage_top_right] = Home Page Top Right
+regions[homepage_top_left] = Home Page Top Left
+regions[homepage_middle_right] = Home Page Middle Right
+regions[homepage_middle_left] = Home Page Middle Left
+regions[homepage_center] = Home Page Center
+regions[news_right] = News Right Sidebar
+regions[content_operations_page] = Operations Page Content
+regions[news_type_page_content] = News Page Content Area
+regions[sidebar_aboutwfp] = About WFP Sidebar
+regions[sidebar_contacts] = Contact Page Sidebar
+regions[sidebar_celebrities] = Celebrities Page Sidebar
+regions[sidebar_celebrity_detail] = Celebrities Detail Page Sidebar
+regions[sidebar_1billion_hungry] = A Billion for a Billion Sidebar
+regions[sidebar_donate_campaign] = Donate Campaign Page Sidebar
+regions[footer_region] = Footer
\ No newline at end of file
Index: themes/wfp_org/templates/block/block.tpl.php
===================================================================
--- themes/wfp_org/templates/block/block.tpl.php	(revision 0)
+++ themes/wfp_org/templates/block/block.tpl.php	(revision 0)
@@ -0,0 +1,13 @@
+<?php
+?>
+<div id="block-<?php print $block->module .'-'. $block->delta; ?>" class="<?php print $block->class ?>">
+
+  <?php if (!empty($block->subject)): ?>
+    <?php print "<$title_tag>$block->subject</$title_tag>"; ?>
+  <?php endif;?>
+
+  <div class="<?php print $block_content_class?>">
+    <?php print $block->content ?>
+  </div>
+
+</div>
\ No newline at end of file
Index: themes/wfp_org/templates/page/page.tpl.php
===================================================================
--- themes/wfp_org/templates/page/page.tpl.php	(revision 1016)
+++ themes/wfp_org/templates/page/page.tpl.php	(working copy)
@@ -156,7 +156,7 @@
 <div class="band">
   <div class="pure-g wrapper">
   <?php if ($breadcrumbs): ?>
-    <div class="pure-u-1 <?php if ($breadcrumbs && $tabs): ?> <?php print 'pure-u-sm-1-2'; ?> <?php elseif ($breadcrumbs && $section_links): ?><?php print 'pure-u-sm-1-3'; ?><?php endif; ?>">
+    <div class="pure-u-1 <?php if ($breadcrumbs && $tabs): ?> <?php print 'pure-u-sm-1-2'; ?> <?php endif; ?>">
       <?php print $breadcrumbs; ?>
     </div>
   <?php endif; ?>
@@ -165,11 +165,6 @@
       <?php print($tabs) ?>
     </div>
   <?php endif ?>
-  <?php if($section_links): ?>
-    <div class="pure-u-1 pure-u-md-2-3 edit-menu">
-      <?php print $section_links; ?>    
-    </div>
-  <?php endif; ?>
   </div>
 </div>
 <?php endif;?>
Index: themes/wfp_org/templates/views/operations/views-view-fields--operations-list--page.tpl.php
===================================================================
--- themes/wfp_org/templates/views/operations/views-view-fields--operations-list--page.tpl.php	(revision 0)
+++ themes/wfp_org/templates/views/operations/views-view-fields--operations-list--page.tpl.php	(revision 0)
@@ -0,0 +1,21 @@
+<div class="operations">
+  <div class="pure-g">
+    <div class="pure-u-sm-1-12 pure-u-md-1-12 pure-u-xl-1-12 operations-icon">
+      <?php if ($row->icons): ?>
+        <?php print $row->icons; ?>
+      <?php endif; ?>
+    </div>
+	  <div class="pure-u-1-1 pure-u-sm-1-2 pure-u-md-5-8 pure-u-xl-5-8 operations-type">
+  	  <div class="country-type"><?php print $row->country_type; ?></div>
+      <div class="operations-type"><?php print $row->operation_type; ?></div>
+	  </div>
+  </div>
+  <div class="pure-g">
+  	<h3 class="operation-title pure-u-1-1" id="node-<?php print $row->nid;?>">
+  	  <?php print l($row->node_title, 'node/'.$row->nid); ?>
+  	</h3>
+    <div class="operation-id pure-u-1-1">
+      <?php print t('Operation ID: %id', array('%id' => $row->node_data_field_id_field_id_value));?>
+    </div>
+  </div>
+</div>
Index: themes/wfp_org/templates/views/views-view.tpl.php
===================================================================
--- themes/wfp_org/templates/views/views-view.tpl.php	(revision 0)
+++ themes/wfp_org/templates/views/views-view.tpl.php	(revision 0)
@@ -0,0 +1,98 @@
+<?php
+/**
+ * @file views-view.tpl.php
+ * Main view template
+ *
+ * Variables available:
+ * - $classes_array: An array of classes determined in
+ *   template_preprocess_views_view(). Default classes are:
+ *     .view
+ *     .view-[css_name]
+ *     .view-id-[view_name]
+ *     .view-display-id-[display_name]
+ *     .view-dom-id-[dom_id]
+ * - $classes: A string version of $classes_array for use in the class attribute
+ * - $css_name: A css-safe version of the view name.
+ * - $css_class: The user-specified classes names, if any
+ * - $header: The view header
+ * - $footer: The view footer
+ * - $rows: The results of the view query, if any
+ * - $empty: The empty text to display if the view is empty
+ * - $pager: The pager next/prev links to display, if any
+ * - $exposed: Exposed widget form/info to display
+ * - $feed_icon: Feed icon to display, if any
+ * - $more: A link to view more, if any
+ * - $admin_links: A rendered list of administrative links
+ * - $admin_links_raw: A list of administrative links suitable for theme('links')
+ *
+ * @ingroup views_templates
+ */
+?>
+
+<section class="pure-g wrapper">
+  <div class="pure-u-1-1 pure-u-md-2-3 pure-u-lg-17-24 l-box">
+    <div class="<?php print $classes; ?>">
+      <?php if ($admin_links): ?>
+        <div class="edit-menu clearfix view-edit-menu-left">
+          <?php print $admin_links; ?>
+        </div>
+      <?php endif; ?>
+      <?php if ($header): ?>
+        <div class="view-header">
+          <?php print $header; ?>
+        </div>
+      <?php endif; ?>
+    
+      <?php if ($exposed): ?>
+        <div class="view-filters pure-u-1-2 pure-u-sm-1-1 clearfix">
+          <?php print $exposed; ?>
+        </div>
+      <?php endif; ?>
+    
+      <?php if ($attachment_before): ?>
+        <div class="attachment attachment-before">
+          <?php print $attachment_before; ?>
+        </div>
+      <?php endif; ?>
+    
+      <?php if ($rows): ?>
+        <div class="view-content">
+          <?php print $rows; ?>
+        </div>
+      <?php elseif ($empty): ?>
+        <div class="view-empty">
+          <?php print $empty; ?>
+        </div>
+      <?php endif; ?>
+    
+      <?php if ($pager): ?>
+        <?php print $pager; ?>
+      <?php endif; ?>
+    
+      <?php if ($more): ?>
+        <?php print $more; ?>
+      <?php endif; ?>
+    
+      <?php if ($footer): ?>
+        <div class="view-footer">
+          <?php print $footer; ?>
+        </div>
+      <?php endif; ?>
+    
+      <?php if ($feed_icon): ?>
+        <div class="feed-icon">
+          <?php print $feed_icon; ?>
+        </div>
+      <?php endif; ?>
+    
+    </div> <?php /* class view */ ?>
+  </div>
+  <div class="pure-u-1-1 pure-u-md-1-3 pure-u-lg-7-24 l-box">
+    <?php if ($attachment_after): ?>
+      <div class="attachment attachment-after">
+        <?php print $attachment_after; ?>
+        <?php print custompage_region_tile('sidebar_site_page'); ?>
+      </div>
+    <?php endif; ?>
+  </div>
+</section>
\ No newline at end of file
Index: modules/wfp_widgets/wfp_widgets.module
===================================================================
--- modules/wfp_widgets/wfp_widgets.module	(revision 1014)
+++ modules/wfp_widgets/wfp_widgets.module	(working copy)
@@ -186,7 +186,13 @@
       ),
       'path' => WFP_WIDGETS_TEMPLATE_PATH,
     ),
-
+    'operations' => array(
+      'template' => 'widget_operations',
+      'arguments' => array(
+        'operations' => array(),
+      ),
+      'path' => WFP_WIDGETS_TEMPLATE_PATH,      
+    ),
   );
 }
 
@@ -281,8 +287,9 @@
     return t('[quote|quote text] to embed a quote. Example: [quote|Gravitation is not responsible for people falling in love. Albert Einstein]');
   case 9:
     return t('[vacancies|type|filter|title_string|empty_string] to add a Vacancies. Example: [vacancies|staffnet|intprof|Available vacancies:|Sorry, there are no vacancies at this moment.]');
+  case 10:
+    return t('[operations|type|country] to add operations. Examples: [operations], [operations|emop], [operations||sy], [operations|emop|sy]');
   }
-
 }
 
 /**
@@ -290,7 +297,6 @@
  */
 function wfp_widgets_filter($op, $delta = 0, $format = -1, $text = '', $cache_id = 0) {
   if (!wfp_global_theme_is_mobile()) {
-  $text = preg_replace('#<p[^>]*>(\s|&nbsp;?)*</p>#', '$1', $text);
     switch ($op) {
     case 'list':
       return array(
@@ -304,6 +310,7 @@
         7 => t('Photo Collection Filter'),
         8 => t('Styled Quote Filter'),
         9 => t('Vacancies Filter'),
+        10 => t('Operations Filter'),
       );
     case 'no cache':
       break;
@@ -329,6 +336,8 @@
         return t('[quote|quote text] to embed a quote. Example: [quote:"Gravitation is not responsible for people falling in love. Albert Einstein"]');
       case 9:
         return t('[vacancies|type|filter|title_string|empty_string] to add a Vacancies. Example: [vacancies|staffnet|intprof|Available vacancies:|Sorry, there are no vacancies at this moment.]');
+      case 10: 
+        return t('[operations|type|country] to add operations. Examples: [operations], [operations|emop], [operations||sy], [operations|emop|sy]');
       }
       break;
     case 'process':
@@ -353,6 +362,8 @@
         return _wfp_widgets_process($text);
       case 9:
         return _wfp_widgets_process($text);
+      case 10: 
+        return _wfp_widgets_process($text);
       default:
         return $text;
       }
@@ -368,6 +379,7 @@
       case 7:
       case 8:
       case 9:
+      case 10:
         break;
       default:
         return;
@@ -390,7 +402,6 @@
  *   Formatted string (HTML).
  */
 function _wfp_widgets_process($text) {
-  $text = preg_replace('#<p[^>]*>(\[((.|\s)+?)\])*</p>#', '$1', $text);
   //Mapping functions.
   $map = array(
     'publication'              => '_wfp_widgets_publications',
@@ -405,6 +416,7 @@
     'photo-collection'         => '_wfp_widgets_photos_collection',
     'quote'                    => '_wfp_widgets_quote',
     'vacancies'                => '_wfp_widgets_vacancies',
+    'operations'               => '_wfp_widgets_operations',
   );
   if (preg_match_all(WFP_WIDGETS_PATTERN, $text, $matches)) {
     foreach ($matches[1] as $key => $match) {
@@ -865,6 +877,148 @@
 }
 
 /**
+ * Widget - Operations.
+ *
+ * @author lashab
+ *
+ * @param string $text
+ *   Formatted full body text.
+ * @param array $operations
+ *   Operations arguments.
+ * @param string $replace
+ *   Matched string that needs to be replaced.
+ *
+ * @return string
+ *   Replaced string token.
+ */
+function _wfp_widgets_operations($text, $operations, $replace) {
+  $terms = array();
+  $types = array();
+  //Get operations vocabulary tree.
+  $operations_tree = taxonomy_get_tree(WFP_GLOBAL_OPERATIONS_VOCABULARY);
+  //Get countries vocabulary tree.
+  $countries_tree = taxonomy_get_tree(WFP_GLOBAL_COUNTRIES_VOCABULARY);
+  //Loop through operations vocabulary and map the term
+  foreach ($operations_tree as $operations_tree) {
+    $keys = explode('(', $operations_tree->name);
+    $keys = explode(')', $keys[1]);
+    $types[drupal_strtolower($keys[0])] = $operations_tree->tid;
+  }
+  //Check wheather operation arguments exists.
+  //If not get all the country terms tid.
+  if ($operations) {
+    $operations = array_values(array_filter($operations));
+    if (count($operations) > 1) {
+      $terms['operation_types'][] = $operations[0];
+      $terms['country_types'][] = $operations[1];
+    }
+    else {
+      $terms['operation_types'][] = $operations[0];
+    }
+  }
+  else {
+    $terms['operation_types'] = array_map(function($country) {
+      return $country->tid;
+    }, $countries_tree);
+  }
+
+  //Loop through terms.
+  //Put each value into single quotes.
+  //If term is operation type repalce it with appropriate tid.
+  //If term is country type replace it with appropriate tid.
+  array_walk($terms, function(&$terms) use ($types) {
+    foreach ($terms as $key => $term) {
+      $type_keys = array_keys($types);
+      if (in_array($term, $type_keys)) {
+        $terms[$key] = sprintf("'%d'", $types[$term]);
+      }
+      else if (is_string($term) && mb_strlen($term) === 2){
+        $query = wfp_global_country_query($term);
+        $result = db_query($query);
+        $row = db_fetch_object($result);
+        $terms[$key] = sprintf("'%d'", $row->term_data_tid);
+      }
+      else {
+        $terms[$key] = sprintf("'%d'", $term);
+      }
+    }
+  });
+  
+  $operation_types = implode(',', $terms['operation_types']);
+  $country_types = implode(',', $terms['country_types']);
+  
+  $rows = array();
+  //Get Operations.
+  $query = _wfp_widgets_operations_query($operation_types, $country_types);
+  $result = db_query($query);
+  while ($operation = db_fetch_object($result)) {
+    //Get path alias for each operations using nid.
+    $path = drupal_get_path_alias('node/' . $operation->nid);
+    //Setting operations ID.
+    $number = floor($operation->node_data_field_id_field_id_value);
+    //Pushing necessary fields into array.
+    //Then use it in theme_table().
+    $rows[] = array(
+      $number ? $number : '<span class="zero-number">&mdash;</span>',
+      l($operation->node_title, $path),
+      $operation->term_type, 
+    );
+  }
+  
+  if ($rows && is_array($rows)) {
+    //Table header values.
+    $headers = array(
+      'Number',
+      'Title',
+      'Type',
+    );
+    //Preparing replacement.
+    $replacement = theme('table', $headers, $rows, array('class' => 'widget-operations'));
+  }
+  //Replace widget string with html table.
+  return _widgets_token_replace($replace, $replacement, $text);
+}
+
+/**
+ * Query for getting operations.
+ *
+ * @author lashab
+ *
+ * @param array $operation_types
+ *   Operation types.
+ * @param array $operation_countries
+ *   Country types.
+ *
+ * @return string
+ *   SQL Query string.
+ */
+function _wfp_widgets_operations_query($operation_types, $operation_countries = array()) {
+  $concat = NULL;
+  $concat .= sprintf(' AND (term_node.tid IN (%s))', $operation_types);
+  if ($operation_countries) {
+    $concat .= sprintf(' AND (term_node2.tid IN (%s))', $operation_countries);
+  }  
+  $concat .= ' GROUP BY node_data_field_id_field_id_value ORDER BY node_data_field_id_field_id_value ASC';
+  
+  $query = "SELECT node.nid AS nid, 
+    node.title AS node_title, 
+    node_data_field_id.field_id_value AS node_data_field_id_field_id_value, 
+    node.type AS node_type, 
+    node.vid AS node_vid, 
+    term_data.name AS term_type 
+    FROM {node} node  
+    LEFT JOIN {term_node} term_node ON node.vid = term_node.vid
+    LEFT JOIN {term_data} term_data ON term_data.tid IN (SELECT term_node.tid FROM {term_node} INNER JOIN {term_data} ON term_node.tid = term_data.tid WHERE term_node.nid = node.nid and term_data.vid = 7)
+    LEFT JOIN {term_node} term_node2 ON node.vid = term_node2.vid
+    LEFT JOIN {content_type_operation} node_data_field_id ON node.vid = node_data_field_id.vid 
+    WHERE (node.status = 1) 
+      AND (node.type in ('operation')) 
+        AND (term_data.vid in ('7','15'))" . $concat;
+           
+  return $query;
+}
+
+/**
  * Widget - Vacancies parser.
  *
  * @author lashab
@@ -880,7 +1034,6 @@
 function _wfp_widgets_vacancies_object($path, $options = array()) {
   $url = url($path, $options);
   $result = drupal_http_request($url);
-  // return json_decode(utf8_decode($result->data), TRUE);
   return json_decode($result->data, TRUE);
 }
 
@@ -1051,4 +1204,4 @@
  */
 function _widgets_node_check($node, $type) {
   return $node && $node->type === $type ? TRUE : FALSE;
-}
+}
\ No newline at end of file
Index: modules/wfp_widgets/template/widget_operations.tpl.php
===================================================================
--- modules/wfp_widgets/template/widget_operations.tpl.php	(revision 0)
+++ modules/wfp_widgets/template/widget_operations.tpl.php	(revision 0)
@@ -0,0 +1,29 @@
+<?php
+/**
+ * @file
+ * widget_operations.tpl.php
+ * 
+ * Theme Implementation to display operation widget
+ *
+ * Avaiable variables
+ * - $operations: operations.
+ */
+?>
+<table class="widget-operations">
+  <thead>
+    <tr>
+      <th>Number</th>
+      <th>Title</th>
+      <th>Type</th>          
+    </tr>
+  <thead>
+  <tbody>
+  <?php foreach($operations as $operation): ?>
+    <tr>
+      <td><?php print $operation['number']; ?></td>
+      <td><?php print $operation['title']; ?></td>
+      <td><?php print $operation['type']; ?></td>
+    </tr>
+  <?php endforeach; ?>
+  </tbody>
+</table>
\ No newline at end of file
Index: modules/wfp_global/wfp_global.module
===================================================================
--- modules/wfp_global/wfp_global.module	(revision 1016)
+++ modules/wfp_global/wfp_global.module	(working copy)
@@ -215,7 +215,165 @@
   return array('section_careers_editor');
 }
 
+
 /**
+ * Implementation of hook_form_alter().
+ */
+function wfp_global_form_alter(&$form, &$form_state, $form_id) {
+  switch ($form_id) {
+    case 'views_exposed_form':
+      $form['#attributes'] = array('class' => 'pure-form');
+    break;
+  }
+}
+
+/**
+ * Implementation of views_pre_render().
+ */
+function wfp_global_views_pre_render(&$view) {
+  switch ($view->name) {
+    case 'operations_list':
+      if ($view->current_display === 'page_1') {
+        foreach ($view->result as $operations) {
+          $country_terms = wfp_global_get_country_terms_by_node($operations->nid);
+          $operations_terms = wfp_global_get_terms_by_node($operations->nid, WFP_GLOBAL_OPERATIONS_VOCABULARY);
+          $country = wfp_global_get_taxonomy_terms_name($country_terms);
+          $operation = wfp_global_get_taxonomy_terms_name($operations_terms);
+          $operations->icons = wfp_global_region_icons_render($country);
+          $operations->operation_type = $operation;
+          $operations->country_type = $country;
+        }
+      }
+    break;
+  }
+}
+
+/**
+ * Get terms by node object.
+ *
+ * @author lashab
+ *
+ * @param integer $nid
+ *   Node id.
+ * @param integer $vid
+ *   Vocabylary id.
+ * @param string $key
+ *   Term tid. 
+ * 
+ * @return array.
+ *   Terms by node.
+ */
+function wfp_global_get_terms_by_node($nid, $vid, $key = 'tid') {
+  $node = node_load($nid);
+  $terms = taxonomy_node_get_terms_by_vocabulary($node, $vid, $key);
+  return $terms;
+}
+
+/**
+ * Get country terms by node object.
+ *
+ * @author lashab
+ *
+ * @param integer $nid
+ *   Node id.
+ * 
+ * @return array.
+ *   Country terms by node.
+ */
+function wfp_global_get_country_terms_by_node($nid) {
+  return wfp_global_get_terms_by_node($nid, WFP_GLOBAL_COUNTRIES_VOCABULARY);
+}
+
+/**
+ * Get all country regions.
+ *
+ * @author lashab
+ *
+ * @return array.
+ *   Country regions
+ */
+function wfp_global_get_country_regions() {
+  $regions = taxonomy_get_tree(WFP_GLOBAL_COUNTRY_REGIONS);
+  return $regions;
+}
+
+/**
+ * Get region by country
+ *
+ * @author lashab
+ *
+ * @param string $country
+ *   Country name.
+ * 
+ * @return string.
+ *   Region name.
+ */
+function wfp_global_get_region_by_country($country) {
+  $region = custompage_view_tile('country_from_term', FALSE, 'page_1', $country);
+  return $region;
+}
+
+function wfp_global_region_icons_render($country) {
+  $region = wfp_global_get_region_by_country($country);
+  $regions = wfp_global_get_taxonomy_terms_name(wfp_global_get_country_regions());
+  
+  foreach ($regions as $key => $region_) {
+    if(strstr($region, $region_)) {
+      $region_class = preg_replace('/\s+/', '-', $region_);
+      $region_class = drupal_strtolower($region_class);
+    }
+  }
+  $icons = $region_class 
+    ? theme('image', sprintf('%s/%s.gif', WFP_GLOBAL_WFP_ORG_IMAGE_ICONS, $region_class), $region_class, $region_class)
+     : theme('image', sprintf('%s/wfp.gif', WFP_GLOBAL_WFP_ORG_IMAGE_ICONS), 'WFP', 'WFP');
+     
+  return $icons;
+}
+
+/**
+ * Get taxonomy terms name.
+ *
+ * @author lashab
+ *
+ * @param array $terms
+ *   Taxonomy terms.
+ * 
+ * @return array.
+ *   Taxonomy terms name.
+ */
+function wfp_global_get_taxonomy_terms_name($terms) {
+  $terms = array_values($terms);
+  $terms = array_map(function($term) {
+    return $term->name;
+  }, $terms);
+  
+  return count($terms) > 1 ? $terms : $terms[0];
+}
+
+/**
+ * Query for getting country term using country code (ISO2).
+ *
+ * @author string lashab
+ * 
+ * @param string $code
+ *   Country iso2 code.
+ *
+ * @return string
+ *    SQL string.
+ */
+function wfp_global_country_query($code) {
+  $query = "SELECT node.nid AS nid, term_data.tid AS term_data_tid FROM {node} node
+    LEFT JOIN {term_node} term_node ON node.vid = term_node.vid
+    LEFT JOIN {term_data} term_data ON term_node.tid = term_data.tid
+    LEFT JOIN {content_type_country} node_data_field_iso31661char2code
+      ON node.vid = node_data_field_iso31661char2code.vid
+        WHERE (term_data.vid in ('15'))
+          AND (node_data_field_iso31661char2code.field_iso31661char2code_value = '%s')";
+
+  return sprintf($query, $code);
+}
+
+/**
  * Set wfp_org theme.
  *
  * @author lashab
Index: modules/wfp_ia/wfp_ia.module
===================================================================
--- modules/wfp_ia/wfp_ia.module	(revision 1014)
+++ modules/wfp_ia/wfp_ia.module	(working copy)
@@ -1,12 +1,42 @@
 <?php
 
+define('WFP_IA_STRUCTURE_MENU', 'menu-structure');
+
+/**
+ * Implementation of hook_init().
+ */
 function wfp_ia_init() {
-  if (arg(0) == 'node' && _use_new_theme(arg(1) && arg(2) !== 'edit')) {
-    global $custom_theme;
-    $custom_theme = 'wfp_org';
+  if (wfp_ia_menu_is_structure()) {
+    wfp_global_wfp_org_theme();
   }
 }
 
+/**
+ * Determine Whether the page is under structure menu.
+ *
+ * @author lashab
+ *
+ * @return boolean
+ *
+ */
+function wfp_ia_menu_is_structure() {
+  $tree = array();
+  //Get current menu.
+  $item = menu_get_item();
+  //Get structure menu.
+  $menu = menu_tree_page_data(WFP_IA_STRUCTURE_MENU);  
+  //Trees recursive
+  _wfp_ia_menu_tree_recursive($menu, $tree);
+  //Get all the hrefs including childrens
+  $hrefs = $tree['href'];
+  //If current path is found in array
+  //The page is under structure menu.
+  if (in_array($item['href'], $hrefs)) {
+    return TRUE;
+  }
+  return FALSE;
+}
+
 function wfp_ia_preprocess_page(&$vars) {
   $tree = _extract_needed_menu(menu_tree_all_data('menu-structure'));
   if (!empty($tree)) {
@@ -54,6 +84,17 @@
   }
 }
 
+function _wfp_ia_menu_tree_recursive($trees, &$tree) {
+  foreach($trees as $key => $value){
+    if(is_array($value)){
+      _wfp_ia_menu_tree_recursive($value, $tree);
+    } 
+    else {
+      $tree[$key][] = $value;
+    }
+  }
+}
+
 function _menu_tree_walk(&$tree, &$neededMenu) {
   foreach ($tree as $key => $node) {
     if ($node['link']['in_active_trail']) {
@@ -70,14 +111,9 @@
   $neededMenu   = array();
   menu_tree_add_active_path($tree);
   _menu_tree_walk($tree, $neededMenu);
-
   return $neededMenu;
 }
 
-function _use_new_theme($nid) {
-  return count(_extract_needed_menu(menu_tree_all_data('menu-structure'))) > 0;
-}
-
 function _tree_to_path($tree) {
   $arr = array();
   $search = array(array_shift($tree));
@@ -92,7 +128,6 @@
       $search = array_merge($search, array_values($below));
     }
   }
-
   return $arr;
 }
 
@@ -104,7 +139,7 @@
   while (!empty($search)) {
     $item  = array_shift($search);
     $below = NULL;
-    if ($item['link']['in_active_trail']) {
+    if (true || $item['link']['in_active_trail']) {
       $arr[] = array('title' => $item['link']['title'], 'class' => $item['link']['options']['attributes']['class']);
     }
     $below = $item['below'];
@@ -114,7 +149,7 @@
     }
   }
   foreach ($arr as $key => $value) {
-    if ($value['title'] == $title) {
+    if (true || $value['title'] == $title) {
       $class = $value['class'];
     }
   }
Index: modules/wfp_theme_support/wfp_theme_support.module
===================================================================
--- modules/wfp_theme_support/wfp_theme_support.module	(revision 1014)
+++ modules/wfp_theme_support/wfp_theme_support.module	(working copy)
@@ -631,7 +631,8 @@
         }
 
         $currpath = $_GET['q'];
-        $out = '<div class="page_tabs"><ul>';
+        $class = wfp_ia_menu_is_structure() ? 'primary tabs' : '';
+        $out = '<div class="page_tabs side-nav"><ul class="menu">';
 
         $section = wfp_current_section($link_id);
         $section->title = t('Overview');
@@ -643,8 +644,6 @@
         foreach ($menu as $m) {
             $class = '';
 
-            //    error_log ($currpath . ' - ' . $m->path );
-
             if ($currpath == $m->path) {
                 $class = ' class="active" ';
             }
